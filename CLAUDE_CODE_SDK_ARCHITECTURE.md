# Claude Code SDK ê¸°ë°˜ Remote Build Architecture

> Claude Codeë¥¼ SDKë¡œ í™œìš©í•œ ì›ê²© ë¹Œë“œ ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ

## ğŸ—ï¸ ì „ì²´ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           LOCAL (MacBook / OpenClaw)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                         Mother (OpenClaw)                            â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚   Discord   â”‚  â”‚  Telegram   â”‚  â”‚      Remote Build Skill     â”‚  â”‚   â”‚
â”‚  â”‚  â”‚   Channel   â”‚  â”‚   Channel   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â€¢ SSH connection     â”‚  â”‚  â”‚   â”‚
â”‚  â”‚         â”‚                â”‚         â”‚  â”‚  â€¢ Task dispatch      â”‚  â”‚  â”‚   â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚  â€¢ Result collection  â”‚  â”‚  â”‚   â”‚
â”‚  â”‚                  â”‚                 â”‚  â”‚  â€¢ Stream processing  â”‚  â”‚  â”‚   â”‚
â”‚  â”‚                  â–¼                 â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚   â”‚
â”‚  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚         â”‚  Task Router  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚   â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                    â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚ SSH + claude -p (stream-json)
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚            â”‚            â”‚                    â”‚
        â–¼            â–¼            â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Yocto    â”‚  â”‚   Host    â”‚  â”‚   Test    â”‚    â”‚  Jenkins  â”‚
â”‚  Builder  â”‚  â”‚  Builder  â”‚  â”‚  Runner   â”‚    â”‚   Agent   â”‚
â”‚           â”‚  â”‚           â”‚  â”‚           â”‚    â”‚           â”‚
â”‚ (aarch64) â”‚  â”‚  (x86)    â”‚  â”‚ (pytest)  â”‚    â”‚   (CI)    â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
      â”‚              â”‚              â”‚                â”‚
      â–¼              â–¼              â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        REMOTE BUILD SERVERS                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    Claude Code (per server)                          â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚   claude -p "task" --allowedTools "Bash,Read,Edit"                  â”‚   â”‚
â”‚  â”‚                    --output-format stream-json                       â”‚   â”‚
â”‚  â”‚                    --dangerously-skip-permissions                    â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚                    Built-in Tools                             â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  Bash  â”‚ â”‚  Read  â”‚ â”‚  Edit  â”‚ â”‚  Grep  â”‚ â”‚  Glob  â”‚     â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚                    .claude/ Config                            â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ settings.json (permissions, model)                        â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ CLAUDE.md (project context)                               â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ agents/ (build-analyzer, error-fixer)                     â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ rules/ (yocto.md, cpp.md, security.md)                    â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚                    Memory (Persistent)                        â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ ~/.claude/memory/ (user scope)                            â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ .claude/memory/ (project scope)                           â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Build history, error patterns, fixes                      â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¡ í†µì‹  íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Jay    â”‚     â”‚  Mother  â”‚     â”‚ Remote Build â”‚     â”‚ Claude Code  â”‚
â”‚ (Discord)â”‚     â”‚(OpenClaw)â”‚     â”‚    Skill     â”‚     â”‚  (Builder)   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                â”‚                  â”‚                    â”‚
     â”‚  "ë¹Œë“œ ëŒë ¤ì¤˜" â”‚                  â”‚                    â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚                    â”‚
     â”‚                â”‚                  â”‚                    â”‚
     â”‚                â”‚  dispatch task   â”‚                    â”‚
     â”‚                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚
     â”‚                â”‚                  â”‚                    â”‚
     â”‚                â”‚                  â”‚  SSH + claude -p   â”‚
     â”‚                â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                â”‚                  â”‚                    â”‚
     â”‚                â”‚                  â”‚  stream-json       â”‚
     â”‚                â”‚                  â”‚<â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€â”‚
     â”‚                â”‚                  â”‚  (tool_use events) â”‚
     â”‚                â”‚                  â”‚                    â”‚
     â”‚                â”‚  progress update â”‚                    â”‚
     â”‚                â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚
     â”‚                â”‚                  â”‚                    â”‚
     â”‚  "ğŸ”§ Running   â”‚                  â”‚                    â”‚
     â”‚   bitbake..."  â”‚                  â”‚                    â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚                    â”‚
     â”‚                â”‚                  â”‚                    â”‚
     â”‚                â”‚                  â”‚  result            â”‚
     â”‚                â”‚                  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                â”‚                  â”‚                    â”‚
     â”‚                â”‚  build complete  â”‚                    â”‚
     â”‚                â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚
     â”‚                â”‚                  â”‚                    â”‚
     â”‚  "âœ… ë¹Œë“œ ì™„ë£Œ â”‚                  â”‚                    â”‚
     â”‚   ê²°ê³¼: ..."   â”‚                  â”‚                    â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚                    â”‚
     â”‚                â”‚                  â”‚                    â”‚
```

## ğŸ”„ Agent Teams ëª¨ë“œ (ë³‘ë ¬ ë¹Œë“œ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS=1                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      Main Agent (Orchestrator)                       â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚   "Run parallel builds for aarch64, x86, and tests"                 â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                              â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚              â”‚               â”‚               â”‚                             â”‚
â”‚              â–¼               â–¼               â–¼                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚   Teammate    â”‚  â”‚   Teammate    â”‚  â”‚   Teammate    â”‚                  â”‚
â”‚  â”‚  (Yocto ARM)  â”‚  â”‚  (Yocto x86)  â”‚  â”‚    (Tests)    â”‚                  â”‚
â”‚  â”‚               â”‚  â”‚               â”‚  â”‚               â”‚                  â”‚
â”‚  â”‚  bitbake      â”‚  â”‚  bitbake      â”‚  â”‚  pytest       â”‚                  â”‚
â”‚  â”‚  aarch64      â”‚  â”‚  x86-64       â”‚  â”‚  integration  â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚          â”‚                  â”‚                  â”‚                           â”‚
â”‚          â”‚  TeammateIdle    â”‚  TeammateIdle    â”‚  TaskCompleted            â”‚
â”‚          â”‚  hook event      â”‚  hook event      â”‚  hook event               â”‚
â”‚          â”‚                  â”‚                  â”‚                           â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                             â”‚                                              â”‚
â”‚                             â–¼                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      Result Aggregation                              â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚   â€¢ ARM build: âœ… SUCCESS (45min)                                   â”‚   â”‚
â”‚  â”‚   â€¢ x86 build: âœ… SUCCESS (38min)                                   â”‚   â”‚
â”‚  â”‚   â€¢ Tests: âš ï¸ 2 FAILED (need_dlt_service, timeout_test)             â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ› ï¸ êµ¬í˜„ ì½”ë“œ

### 1. Remote Build Skill (Python)

```python
# skills/remote-build/scripts/build.py
import subprocess
import json
import sys
from typing import Iterator, Optional

class RemoteBuildAgent:
    """Claude Code SDKë¥¼ ì´ìš©í•œ ì›ê²© ë¹Œë“œ ì—ì´ì „íŠ¸"""
    
    def __init__(self, server: str, workdir: str):
        self.server = server
        self.workdir = workdir
    
    def execute(
        self, 
        task: str,
        allowed_tools: list[str] = ["Bash", "Read", "Edit"],
        stream: bool = True
    ) -> Iterator[dict]:
        """ì›ê²© ì„œë²„ì—ì„œ Claude Code ì‹¤í–‰"""
        
        tools = ",".join(allowed_tools)
        
        cmd = f'''ssh {self.server} "cd {self.workdir} && \\
            claude -p '{task}' \\
            --allowedTools '{tools}' \\
            --output-format stream-json \\
            --dangerously-skip-permissions"'''
        
        process = subprocess.Popen(
            cmd,
            shell=True,
            stdout=subprocess.PIPE,
            stderr=subprocess.PIPE
        )
        
        for line in process.stdout:
            try:
                event = json.loads(line.decode())
                yield event
                
                # ì‹¤ì‹œê°„ ë¡œê¹…
                if event.get('type') == 'tool_use':
                    print(f"ğŸ”§ {event['tool']}: {event.get('input', '')[:100]}")
                elif event.get('type') == 'text':
                    print(f"ğŸ’¬ {event['text'][:200]}")
                    
            except json.JSONDecodeError:
                continue
        
        process.wait()
    
    def build_yocto(self, target: str = "aarch64") -> dict:
        """Yocto ë¹Œë“œ ì‹¤í–‰"""
        task = f"""
        Run Yocto build for {target} target:
        1. Source the build environment
        2. Run bitbake for the target image
        3. If build fails, analyze the error and suggest fixes
        4. Report build time and artifact locations
        """
        
        results = list(self.execute(task))
        return results[-1] if results else {}
    
    def run_tests(self, test_path: str = "tests/") -> dict:
        """í…ŒìŠ¤íŠ¸ ì‹¤í–‰"""
        task = f"""
        Run integration tests in {test_path}:
        1. Activate virtual environment if exists
        2. Run pytest with verbose output
        3. Analyze any failures
        4. Generate test report summary
        """
        
        results = list(self.execute(task))
        return results[-1] if results else {}


# ì‚¬ìš© ì˜ˆì‹œ
if __name__ == "__main__":
    agent = RemoteBuildAgent(
        server="ccu2-builder",
        workdir="/home/jay/snt-integration-tests"
    )
    
    # Yocto ë¹Œë“œ
    result = agent.build_yocto(target="aarch64")
    print(f"Build result: {result}")
```

### 2. Shell Wrapper (ê°„ë‹¨ ë²„ì „)

```bash
#!/bin/bash
# skills/remote-build/scripts/remote-claude.sh

SERVER="${1:-ccu2-builder}"
WORKDIR="${2:-/home/jay/workspace}"
TASK="${3:-echo hello}"

ssh "$SERVER" "cd $WORKDIR && \
    claude -p '$TASK' \
    --allowedTools 'Bash,Read,Edit,Grep,Glob' \
    --output-format stream-json \
    --dangerously-skip-permissions" | \
    jq -r 'select(.type == "result") | .result'
```

### 3. OpenClaw Integration

```yaml
# .openclaw/workspace/skills/remote-build/SKILL.md
---
name: remote-build
description: Execute builds on remote servers using Claude Code SDK
triggers:
  - "ë¹Œë“œ ëŒë ¤"
  - "ì›ê²© ë¹Œë“œ"
  - "yocto build"
  - "run tests on"
---

# Remote Build Skill

Claude Code SDKë¥¼ ì´ìš©í•´ ì›ê²© ë¹Œë“œ ì„œë²„ì—ì„œ ì‘ì—… ì‹¤í–‰.

## Usage

```bash
# Yocto ë¹Œë“œ
python scripts/build.py yocto --server ccu2-builder --target aarch64

# í…ŒìŠ¤íŠ¸ ì‹¤í–‰  
python scripts/build.py test --server test-runner --path tests/integration/

# ì»¤ìŠ¤í…€ íƒœìŠ¤í¬
./scripts/remote-claude.sh ccu2-builder /path/to/repo "analyze build errors"
```

## Servers

| Server | Purpose | SSH Config |
|--------|---------|------------|
| ccu2-builder | Yocto ARM builds | ~/.ssh/config |
| yocto-x86 | Yocto x86 builds | ~/.ssh/config |
| test-runner | Integration tests | ~/.ssh/config |
```

## ğŸ“Š ë¹„êµ: ê¸°ì¡´ vs Claude Code SDK

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Architecture Comparison                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   OLD: SSH + Agent SDK      â”‚    â”‚  NEW: Claude Code SDK       â”‚        â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
â”‚  â”‚                             â”‚    â”‚                             â”‚        â”‚
â”‚  â”‚  Local                      â”‚    â”‚  Local                      â”‚        â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚        â”‚
â”‚  â”‚  â”‚ Custom Agent Loop   â”‚   â”‚    â”‚  â”‚ SSH + claude -p     â”‚   â”‚        â”‚
â”‚  â”‚  â”‚ â€¢ Tool definitions  â”‚   â”‚    â”‚  â”‚ (one liner!)        â”‚   â”‚        â”‚
â”‚  â”‚  â”‚ â€¢ Context mgmt      â”‚   â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚        â”‚
â”‚  â”‚  â”‚ â€¢ Error handling    â”‚   â”‚    â”‚                             â”‚        â”‚
â”‚  â”‚  â”‚ â€¢ State mgmt        â”‚   â”‚    â”‚  Remote                     â”‚        â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚        â”‚
â”‚  â”‚           â”‚                â”‚    â”‚  â”‚ Claude Code         â”‚   â”‚        â”‚
â”‚  â”‚           â–¼                â”‚    â”‚  â”‚ â€¢ Built-in tools    â”‚   â”‚        â”‚
â”‚  â”‚  Remote                    â”‚    â”‚  â”‚ â€¢ Auto context      â”‚   â”‚        â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚  â”‚ â€¢ Memory support    â”‚   â”‚        â”‚
â”‚  â”‚  â”‚ Python + anthropic  â”‚   â”‚    â”‚  â”‚ â€¢ Session resume    â”‚   â”‚        â”‚
â”‚  â”‚  â”‚ â€¢ pip install       â”‚   â”‚    â”‚  â”‚ â€¢ Agent Teams       â”‚   â”‚        â”‚
â”‚  â”‚  â”‚ â€¢ Tool impl         â”‚   â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚        â”‚
â”‚  â”‚  â”‚ â€¢ Error patterns    â”‚   â”‚    â”‚                             â”‚        â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚                             â”‚        â”‚
â”‚  â”‚                             â”‚    â”‚                             â”‚        â”‚
â”‚  â”‚  Complexity: HIGH           â”‚    â”‚  Complexity: LOW            â”‚        â”‚
â”‚  â”‚  Maintenance: HIGH          â”‚    â”‚  Maintenance: LOW           â”‚        â”‚
â”‚  â”‚  Features: LIMITED          â”‚    â”‚  Features: FULL             â”‚        â”‚
â”‚  â”‚                             â”‚    â”‚                             â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âœ… ë‹¤ìŒ ë‹¨ê³„

1. **ë¹Œë“œ ì„œë²„ì— Claude Code ì„¤ì¹˜**
   ```bash
   ssh ccu2-builder "curl -fsSL https://claude.ai/install.sh | bash"
   ```

2. **SSH í‚¤ ì„¤ì •** (ì´ë¯¸ ì™„ë£Œë˜ì–´ ìˆë‹¤ë©´ skip)

3. **í…ŒìŠ¤íŠ¸ ì‹¤í–‰**
   ```bash
   ./scripts/remote-claude.sh ccu2-builder /path/to/repo "list files"
   ```

4. **Agent Teams í™œì„±í™”** (ì„ íƒ)
   ```bash
   export CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS=1
   ```

---

*Created: 2026-02-06*
*Based on Claude Code v2.1.33 + Agent SDK*
